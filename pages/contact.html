<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Contact - Code Quiz Challenge</title>
  <link rel="stylesheet" href="../styles/contact.css">
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
  
  
  <script src="../scripts/auth.js"></script>
  
  <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
  <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>
  
  <script src="../scripts/theme.js"></script>
  
  <style>
   
    .error-message {
      color: #ff3333;
      font-size: 0.85em;
      margin-top: 5px;
      display: block;
    }
    
    input.error, textarea.error {
      border: 1px solid #ff3333;
      background-color: #fff6f6;
    }
    
   
    .success-animation {
      text-align: center;
      padding: 20px;
      margin-top: 20px;
    }
    
    .success-checkmark {
      color: #4CAF50;
      font-size: 48px;
    }
    
    
    .ui-dialog-titlebar {
      background-color: #4CAF50;
      color: white;
    }
    
    .ui-dialog .ui-dialog-buttonpane button {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 5px 20px;
      border-radius: 4px;
    }
    
 
    #feedback-container {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.8);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }
    
    .feedback-content {
      background-color: white;
      padding: 30px;
      border-radius: 10px;
      text-align: center;
      width: 80%;
      max-width: 500px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
    
    .feedback-icon {
      font-size: 80px;
      margin-bottom: 20px;
      color: #4CAF50;
      animation: pulse 1.5s infinite;
    }
    
    .feedback-message {
      font-size: 24px;
      margin-bottom: 20px;
      color: #333;
    }
    
    .feedback-detail {
      font-size: 16px;
      margin-bottom: 30px;
      color: #666;
    }
    
    .feedback-btn {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 10px 30px;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    
    .feedback-btn:hover {
      background-color: #45a049;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
  </style>
</head>
<body>
  <header>
    <h1>Code Quiz Challenge</h1>
    <nav>
      <ul>
        <li><a href="about.html">About</a></li>
        <li><a href="quiz.html">Quiz</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="score.html">Score</a></li>
        <li><a href="messages.html">Messages</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <div class="contact-container">
      <h2>Contact Us</h2>
      
      <div class="contact-info">
        <h3>Project Team</h3>
        <div class="team-member">
          <h4>Efe Bekir Altop</h4>
          <div class="phone">
            <span>ðŸ“ž</span>
            <span>+90 555 123 45 67</span>
          </div>
          <div class="email">
            <span>ðŸ“§</span>
            <span>efe.altop@example.com</span>
          </div>
        </div>
        
        <div class="team-member">
          <h4>Furkan Macit</h4>
          <div class="phone">
            <span>ðŸ“ž</span>
            <span>+90 555 987 65 43</span>
          </div>
          <div class="email">
            <span>ðŸ“§</span>
            <span>furkan.macit@example.com</span>
          </div>
        </div>
      </div>

      <div class="contact-form">
        <h3>Contact Form</h3>
        <form id="contact-form">
          <div class="form-group">
            <label for="name">Your Name:</label>
            <input type="text" id="name" name="name" required>
            <span class="error-message" id="name-error"></span>
          </div>
          
          <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
            <span class="error-message" id="email-error"></span>
          </div>
          
          <div class="form-group">
            <label for="phone">Phone Number:</label>
            <input type="tel" id="phone" name="phone">
            <span class="error-message" id="phone-error"></span>
          </div>
          
          <div class="form-group">
            <label for="response-date">Expected Response Date:</label>
            <input type="text" id="response-date" name="response-date" readonly>
          </div>
          
          <div class="form-group">
            <label for="message">Your Message:</label>
            <textarea id="message" name="message" required></textarea>
            <span class="error-message" id="message-error"></span>
          </div>
          
          <button type="submit" id="submit-btn">Send</button>
        </form>
        
    
        <div id="success-animation" class="success-animation" style="display: none;">
          <div class="success-checkmark animate__animated animate__bounceIn">âœ“</div>
          <p class="animate__animated animate__fadeIn">Your message has been sent successfully!</p>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 Code Quiz Challenge</p>
  </footer>
  
 
  <div id="feedback-container">
    <div class="feedback-content">
      <div class="feedback-icon">âœ…</div>
      <div class="feedback-message">Thank You!</div>
      <div class="feedback-detail">Your message has been sent successfully. We will get back to you as soon as possible.</div>
      <button class="feedback-btn" id="feedback-close-btn">OK</button>
    </div>
  </div>

  <script>
    $(document).ready(function(){
      
      $("#response-date").datepicker({
        dateFormat: "dd/mm/yy",
        minDate: 0, 
        maxDate: "+1M", 
        showAnim: "slideDown",
        firstDay: 1, 
        dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
        monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
      });
    
      
      $("#contact-form").validate({
        rules: {
          name: {
            required: true,
            minlength: 2
          },
          email: {
            required: true,
            email: true
          },
          phone: {
            required: false,
            phoneUS: true
          },
          message: {
            required: true,
            minlength: 10
          }
        },
        messages: {
          name: {
            required: "Please enter your name",
            minlength: "Your name must be at least 2 characters long"
          },
          email: {
            required: "Please enter your email address",
            email: "Please enter a valid email address"
          },
          phone: {
            phoneUS: "Please enter a valid phone number (e.g., 555-123-4567)"
          },
          message: {
            required: "Please enter your message",
            minlength: "Your message must be at least 10 characters long"
          }
        },
        errorPlacement: function(error, element) {
          var id = element.attr("id");
          $("#" + id + "-error").html(error);
        },
        highlight: function(element, errorClass) {
          $(element).addClass('error');
        },
        unhighlight: function(element, errorClass) {
          $(element).removeClass('error');
        },
        submitHandler: function(form) {
         
          $("#submit-btn").prop("disabled", true).text("Sending...");
          
          const name = $("#name").val().trim();
          const email = $("#email").val().trim();
          const phone = $("#phone").val().trim();
          const responseDate = $("#response-date").val().trim();
          const message = $("#message").val().trim();
          const date = new Date().toLocaleString();
          const id = Date.now(); 

        
          const messageObj = {
            id,
            name,
            email,
            phone,
            responseDate,
            message,
            date,
            isRead: false 
          };

       
          saveMessage(messageObj);

          
          showFeedbackModal(name);
          
         
          setTimeout(function() {
            form.reset();
            $("#response-date").datepicker("setDate", null);
            $("#submit-btn").prop("disabled", false).text("Send");
          }, 1000);
        }
      });
      
      
      function saveMessage(messageObj) {
        try {
          
          let messages = [];
          try {
            messages = JSON.parse(localStorage.getItem("contactMessages")) || [];
          } catch (error) {
            console.error("Error parsing messages:", error);
            messages = [];
          }
          
         
          messages.unshift(messageObj);
          
          
          localStorage.setItem("contactMessages", JSON.stringify(messages));
          
          console.log("Message saved successfully:", messageObj);
          return true;
        } catch (error) {
          console.error("Error saving message:", error);
          return false;
        }
      }
      
     
      function showFeedbackModal(name) {
       
        $('.feedback-detail').text(`Dear ${name}, your message has been received successfully. We will get back to you as soon as possible.`);
        
        
        $('#feedback-container').css('display', 'flex').hide().fadeIn(500);
        
       
        $('#feedback-close-btn').on('click', function() {
          $('#feedback-container').fadeOut(500);
        });
        
        
        setTimeout(function() {
          $('#feedback-container').fadeOut(500);
        }, 10000);
      }

    
      $.validator.addMethod("phoneUS", function(phone_number, element) {
        phone_number = phone_number.replace(/\s+/g, "");
        return this.optional(element) || phone_number.length > 9 &&
          phone_number.match(/^(\+90|0)?\s?5\d{2}\s?\d{3}\s?\d{2}\s?\d{2}$/);
      }, "Please enter a valid phone number");
    });
  </script>
</body>
</html>
